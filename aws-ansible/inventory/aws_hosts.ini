#===============================================================================
# inventory/aws_hosts.ini - Ansible 인벤토리
#===============================================================================
# 역할: 관리 대상 호스트 정의
# 사용법: terraform output 결과로 IP 주소 업데이트
#
# IP 확인 명령어:
#   terraform output web_public_ips
#   terraform output app_private_ips
#   terraform output internal_alb_dns
#   terraform output rds_endpoint
#===============================================================================

#---------------------------------------
# Web Tier (Public Subnet - 직접 SSH 접속)
#---------------------------------------
[web]
web-a ansible_host=$WEB_A_PUBLIC_IP
## web-a ansible_host=$WEB_A_PUBLIC_IP
web-c ansible_host=$WEB_C_PUBLIC_IP
## web-c ansible_host=$WEB_C_PUBLIC_IP

#---------------------------------------
# App Tier (Private Subnet - Bastion 경유)
#---------------------------------------
# ProxyJump: Web 서버를 통해 접속
[app]
app-a ansible_host=$APP_A_PRIVATE_IP
## app-a ansible_host=$APP_A_PRIVATE_IP
app-c ansible_host=$APP_C_PRIVATE_IP
## app-c ansible_host=$APP_C_PRIVATE_IP

#---------------------------------------
# 그룹 변수
#---------------------------------------
[web:vars]
# Web 서버는 직접 접속

[app:vars]
# App 서버는 web-a를 Bastion으로 사용하여 접속
# ansible_ssh_common_args: ProxyJump 설정
ansible_ssh_common_args='-o ProxyJump=rocky@$WEB_A_PUBLIC_IP'
## ansible_ssh_common_args='-o ProxyJump=rocky@$WEB_A_PUBLIC_IP'

#---------------------------------------
# 전체 호스트 공통 변수
#---------------------------------------
[all:vars]
ansible_user=rocky
ansible_python_interpreter=/usr/bin/python3

# Internal ALB DNS (Nginx upstream 설정용)
internal_alb_dns=$INTERNAL_ALB_DNS
## internal_alb_dns=$INTERNAL_ALB_DNS
# RDS 연결 정보 (WildFly 데이터소스용)
rds_endpoint=$RDS_ENDPOINT 
## rds_endpoint=$RDS_ENDPOINT 
rds_port=5432
rds_database=myappdb
rds_username=postgres
# 비밀번호는 별도 관리 (vault 또는 환경변수)
# 비밀번호는 terraform에서 관리함 
